"use strict";(self.webpackChunkdocumentation=self.webpackChunkdocumentation||[]).push([[7079],{733:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>o,contentTitle:()=>l,default:()=>m,frontMatter:()=>a,metadata:()=>n,toc:()=>c});const n=JSON.parse('{"id":"fundamentals/filters","title":"Event filters","description":"Filters are used to filter events before they are passed to the handler. Filters are used to filter events by their type, by the user that triggered the event, by the community, by the channel, etc.","source":"@site/docs/fundamentals/filters.md","sourceDirName":"fundamentals","slug":"/fundamentals/filters","permalink":"/Switch-Bots-Python-Library/docs/fundamentals/filters","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Bot Context","permalink":"/Switch-Bots-Python-Library/docs/fundamentals/context"},"next":{"title":"Getting higher upload speed","permalink":"/Switch-Bots-Python-Library/docs/fundamentals/upload_speed"}}');var i=t(4848),r=t(8453);const a={sidebar_position:6},l="Event filters",o={},c=[{value:"Filter types",id:"filter-types",level:2},{value:"Filter examples",id:"filter-examples",level:2},{value:"Normal filters",id:"normal-filters",level:3},{value:"Regex filters",id:"regex-filters",level:3},{value:"Custom Filters",id:"custom-filters",level:2}];function d(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.header,{children:(0,i.jsx)(s.h1,{id:"event-filters",children:"Event filters"})}),"\n",(0,i.jsx)(s.p,{children:"Filters are used to filter events before they are passed to the handler. Filters are used to filter events by their type, by the user that triggered the event, by the community, by the channel, etc."}),"\n",(0,i.jsx)(s.p,{children:"When a filter is used, the handler will only be called if the event passes the filter."}),"\n",(0,i.jsxs)(s.p,{children:["You can use multiple filters in a single handler, using the unary operators ",(0,i.jsx)(s.code,{children:"&"})," and ",(0,i.jsx)(s.code,{children:"|"}),"."]}),"\n",(0,i.jsx)(s.p,{children:"To add a filter to a handler, add the filter as a parameter to the handler class."}),"\n",(0,i.jsx)(s.h2,{id:"filter-types",children:"Filter types"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"self"}),"  Filter messages generated by the same user. Example: @app.on_message(self)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"is_bot"})," Filter messages coming from bots. Example: @app.on_message(is_bot)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"me"})," Filter messages coming from your user. Example: @app.on_message(me)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"incoming"})," Filter incoming messages. Messages that are sent to the users recipient. Example: @app.on_message(incoming)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"outgoing"})," Filter outgoing messages. Messages that are sent by the user.  Example: @app.on_message(outgoing)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"community"}),' Filter events coming from a specific community or list of communities. Accepts a single community_id or an array of ids. Example: @app.on_message(community("123456789")) or @app.on_message(community(["123456789", "987654321"]))']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"channel"}),' Filter events coming from a specific channel or a list of channels. Accepts a single channel_id or an array of ids. Example: @app.on_message(channel("123456789")) or @app.on_message(channel(["123456789", "987654321"]))']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"group"}),' Filter events coming from a specific group or a list of groups. Accepts a single group_id or an array of ids. Example: @app.on_message(group("123456789")) or @app.on_message(group(["123456789", "987654321"]))']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"user"}),' Filter events coming from a specific user or a list of users. Accepts a single user_id or an array of ids. Example: @app.on_message(user("123456789")) or @app.on_message(user(["123456789", "987654321"]))']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"text"}),' Filter messages that contain a specific text. Example: @app.on_message(text("hello")) will match messages that contain the text "hello"']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"regexp"}),' Filter messages that match a specific regex. Example: @app.on_message(regex(r"^hello")) will match messages that start with "hello"']}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"message_type"})," Filter messages that match a specific message type. Example: @app.on_message(message_type(0)) will match messages that are of type 0 (text), @app.on_message(message_type(1)) will match messages that are of type 1 (image), etc.\n(Available types are: 0 text, 1 image, 2 video, 3 audio, 7 document/file)"]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"audio"}),": Filter for audio messages."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"document"}),": Filter for document messages."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"video"}),": Filter for video messages."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"photo"}),": Filter for photo messages."]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.code,{children:"sticker"}),": Filter for sticker messages."]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"filter-examples",children:"Filter examples"}),"\n",(0,i.jsx)(s.h3,{id:"normal-filters",children:"Normal filters"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'from swibots import Client, MessageHandler, BotContext, is_bot, community, channel, \n\napp = Client("token", "your bot description")\n\n@app.on_message(is_bot & (community("123456789") | channel("123456")))\nasync def message_handler(ctx: BotContext[MessageEvent]):\n    await m.reply_text(f"Thank you! I received your message: {ctx.event.message.message}")\n    \napp.run()\n'})}),"\n",(0,i.jsx)(s.h3,{id:"regex-filters",children:"Regex filters"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:'from swibots import Client, MessageEvent, BotContext, regexp\n\napp = Client("token", "your bot description")\n\n@app.on_message(regexp(\'hello (.*)\'))\nasync def regex_handler(ctx: BotContext[MessageEvent]):\n    print(ctx.event.message.matches) # List[re.Match]\n    await ctx.event.message.respond(f"\ud83e\udd86 Hello {ctx.event.message.matches[0].group(1)}!")\n    \napp.run()\n'})}),"\n",(0,i.jsx)(s.h2,{id:"custom-filters",children:"Custom Filters"}),"\n",(0,i.jsxs)(s.p,{children:["You can use the ",(0,i.jsx)(s.code,{children:"filters.create()"})," function to create your own custom filters!"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-python",children:"from swibots import Client, filters, BotContext, MessageEvent\n\napp = Client('TOKEN')\n\n# A filter to match the starting of the message sent [case insensitive]\ndef hello_filter(data: str):\n    async def func(flt, ctx):\n        m = ctx.event.message\n        if not m.message:\n            return False\n        return m.message.lower().startswith(flt.data.lower())\n    return filters.create(func, data=data)\n\n# add filter to message event\n@app.on_message(hello_filter('hi'))\nasync def custom_filters(ctx: BotContext[MessageEvent]):\n    await ctx.event.message.reply_text(\"Hello user \ud83e\udd16!\")\n"})})]})}function m(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>a,x:()=>l});var n=t(6540);const i={},r=n.createContext(i);function a(e){const s=n.useContext(r);return n.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),n.createElement(r.Provider,{value:s},e.children)}}}]);